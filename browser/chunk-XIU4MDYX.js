import{B as he,C as O,F as be,G as V,e as ae,f as R,g as N,h as me,i as ne,j as pe,k as se,l as le,m as de,n as ce,o as ue,p as fe,q as Ee,r as Ce,s as T,t as L,u as j,v as h,w as A,x as Me,y as _e}from"./chunk-ILJUWHCE.js";import{D as B,E as q,Ea as a,Fa as Q,Ga as v,R as n,V as s,Z as F,_ as I,a as z,ab as U,b as J,ca as l,db as M,fa as d,fb as W,hb as x,la as r,lb as f,ma as o,mb as X,na as c,nb as H,nc as w,oa as g,oc as _,pa as D,pb as Y,qb as Z,ra as K,rc as ve,sb as ee,sc as y,ta as u,tb as te,ua as G,ub as ie,vb as oe,wb as re,xb as k,y as S}from"./chunk-JQPCVG6W.js";function ke(e,t){e&1&&(r(0,"th",12),a(1," ID "),o())}function Re(e,t){if(e&1&&(r(0,"td",13),a(1),o()),e&2){let i=t.$implicit;n(),v(" ",i.id," ")}}function we(e,t){e&1&&(r(0,"th",12),a(1," Nome "),o())}function Ne(e,t){if(e&1&&(r(0,"td",13),a(1),o()),e&2){let i=t.$implicit;n(),v(" ",i.nome," ")}}function Te(e,t){e&1&&(r(0,"th",12),a(1," CNPJ "),o())}function ye(e,t){if(e&1&&(r(0,"td",13),a(1),o()),e&2){let i=t.$implicit;n(),v(" ",i.cnpj," ")}}function Le(e,t){e&1&&(r(0,"th",12),a(1," A\xE7\xF5es "),o())}function je(e,t){if(e&1){let i=K();r(0,"td",13)(1,"button",14),u("click",function(){let p=B(i).$implicit,C=G();return q(C.editarEmpresa(p))}),c(2,"mat-icon"),a(3,"Editar "),o(),r(4,"button",15),u("click",function(){let p=B(i).$implicit,C=G();return q(C.excluirEmpresa(p))}),c(5,"mat-icon"),a(6,"Excluir "),o()()}}function Ae(e,t){e&1&&c(0,"tr",16)}function Oe(e,t){e&1&&c(0,"tr",17)}function Ve(e,t){e&1&&(r(0,"tr",18)(1,"td",19),a(2,"Nenhuma empresa encontrada."),o()())}var b=class e{constructor(t,i,m){this.mockDataService=t;this.dialog=i;this.router=m}empresas$;displayedColumns=["id","nome","cnpj","acoes"];ngOnInit(){this.empresas$=this.mockDataService.getEmpresas()}editarEmpresa(t){this.router.navigate(["/admin/editar",t.id])}excluirEmpresa(t){this.dialog.open(N,{data:{title:"Confirmar Exclus\xE3o",message:`Tem certeza que deseja excluir a empresa "${t.nome}"?`}}).afterClosed().subscribe(m=>{m&&this.mockDataService.deleteEmpresa(t.id).subscribe(()=>{console.log("Empresa exclu\xEDda:",t.id),this.empresas$=this.mockDataService.getEmpresas()})})}novaEmpresa(){this.router.navigate(["/admin/nova"])}static \u0275fac=function(i){return new(i||e)(s(A),s(ae),s(x))};static \u0275cmp=F({type:e,selectors:[["app-empresa-list"]],decls:23,vars:3,consts:[[1,"container"],["mat-stroked-button","","color","primary","aria-label","Adicionar Empresa",1,"add-button",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","cnpj"],["matColumnDef","acoes"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,m){i&1&&(r(0,"div",0)(1,"h2"),a(2,"Gerenciamento de Empresas"),o(),r(3,"button",1),u("click",function(){return m.novaEmpresa()}),a(4,` Adicionar Nova Empresa
`),o(),r(5,"mat-card")(6,"mat-card-content")(7,"table",2),g(8,3),l(9,ke,2,0,"th",4)(10,Re,2,1,"td",5),D(),g(11,6),l(12,we,2,0,"th",4)(13,Ne,2,1,"td",5),D(),g(14,7),l(15,Te,2,0,"th",4)(16,ye,2,1,"td",5),D(),g(17,8),l(18,Le,2,0,"th",4)(19,je,7,0,"td",5),D(),l(20,Ae,1,0,"tr",9)(21,Oe,1,0,"tr",10)(22,Ve,3,0,"tr",11),o()()()()),i&2&&(n(7),d("dataSource",m.empresas$),n(13),d("matHeaderRowDef",m.displayedColumns),n(),d("matRowDefColumns",m.displayedColumns))},dependencies:[M,f,T,me,pe,ce,se,ne,ue,le,de,fe,Ee,Ce,y,ve,_,w,h,L,j,R],encapsulation:2})};function $e(e,t){e&1&&(r(0,"mat-error"),a(1," Nome \xE9 obrigat\xF3rio. "),o())}function Be(e,t){e&1&&(r(0,"mat-error"),a(1," CNPJ \xE9 obrigat\xF3rio. "),o())}var E=class e{constructor(t,i,m,p){this.fb=t;this.mockDataService=i;this.router=m;this.route=p}empresaForm;isEditMode=!1;empresaId=null;pageTitle="Nova Empresa";ngOnInit(){this.empresaId=this.route.snapshot.params.id?+this.route.snapshot.params.id:null,this.isEditMode=!!this.empresaId,this.pageTitle=this.isEditMode?"Editar Empresa":"Nova Empresa",this.initForm(),this.isEditMode&&this.empresaId&&this.loadEmpresaData(this.empresaId)}initForm(){this.empresaForm=this.fb.group({nome:["",H.required],cnpj:["",H.required],endereco:[""]})}loadEmpresaData(t){this.mockDataService.getEmpresaById(t).subscribe(i=>{i&&this.empresaForm.patchValue(i)})}onSubmit(){if(this.empresaForm.invalid){this.empresaForm.markAllAsTouched();return}let t=this.empresaForm.value,i;this.isEditMode&&this.empresaId?i=this.mockDataService.updateEmpresa(J(z({},t),{id:this.empresaId})):i=this.mockDataService.addEmpresa(t),i.subscribe(()=>{this.router.navigate(["/admin"])})}cancel(){this.router.navigate(["/admin"])}static \u0275fac=function(i){return new(i||e)(s(re),s(A),s(x),s(W))};static \u0275cmp=F({type:e,selectors:[["app-empresa-form"]],decls:21,vars:6,consts:[[1,"container"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","nome","required",""],[4,"ngIf"],["matInput","","formControlName","cnpj","required",""],[1,"button-row"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-stroked-button","","type","button",3,"click"]],template:function(i,m){if(i&1&&(r(0,"div",0)(1,"h2"),a(2),o(),r(3,"mat-card")(4,"mat-card-content")(5,"form",1),u("ngSubmit",function(){return m.onSubmit()}),r(6,"mat-form-field",2)(7,"mat-label"),a(8,"Nome da Empresa"),o(),c(9,"input",3),l(10,$e,2,0,"mat-error",4),o(),r(11,"mat-form-field",2)(12,"mat-label"),a(13,"CNPJ"),o(),c(14,"input",5),l(15,Be,2,0,"mat-error",4),o(),r(16,"div",6)(17,"button",7),a(18),o(),r(19,"button",8),u("click",function(){return m.cancel()}),a(20,"Cancelar"),o()()()()()()),i&2){let p,C;n(2),Q(m.pageTitle),n(3),d("formGroup",m.empresaForm),n(5),d("ngIf",(p=m.empresaForm.get("nome"))==null?null:p.hasError("required")),n(5),d("ngIf",(C=m.empresaForm.get("cnpj"))==null?null:C.hasError("required")),n(2),d("disabled",m.empresaForm.invalid),n(),v(" ",m.isEditMode?"Atualizar":"Salvar"," ")}},dependencies:[M,U,k,ee,X,Y,Z,oe,te,ie,f,O,he,Me,_e,V,be,_,w,h,L,j],encapsulation:2})};var qe=[{path:"",component:b},{path:"nova",component:E},{path:"editar/:id",component:E}],$=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=I({type:e});static \u0275inj=S({imports:[f.forChild(qe),f]})};var ge=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=I({type:e});static \u0275inj=S({imports:[M,$,k,T,_,y,O,V,h,R,b,E,N]})};export{ge as AdminModule};
